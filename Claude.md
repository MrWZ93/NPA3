# NPA3 - 神经物理数据可视化与分析工具

## 项目概览

**项目名称：** NPA3 - Neural Physics Data Visualization and Analysis Tool  
**开发者：** mr.curlyw (zwang094@fiu.edu)  
**当前版本：** 3.1  
**项目性质：** 个人持续优化项目  
**最后更新：** 2025-09-03  
**开发语言：** Python 3.13  

## 项目描述

NPA3是一个功能强大的多格式神经物理数据可视化与分析工具，专门用于处理和分析实验数据。项目采用模块化设计，提供直观的图形界面，集成了数据可视化、处理和高级分析功能。

## 核心功能模块

### 🔧 数据处理核心
- **多格式支持**: TDMS、H5、ABF、CSV等实验数据格式
- **专业CSV加载器**: 优化的示波器CSV格式支持和大文件处理
- **数据处理工具**: 低通/高通滤波、基线校正、数据裁剪、工频噪音过滤
- **文件系统模型**: 智能文件管理和组织

### 🖥️ 图形界面系统
- **主窗口**: 三区域布局设计 (文件浏览器 + 可视化区域 + 处理文件区域)
- **可折叠侧边栏**: 支持左右侧边栏折叠以专注于可视化
- **标签页系统**: 数据处理、笔记管理等功能模块
- **现代化样式**: 基于Fusion风格的自定义样式系统

### 📊 高级分析工具

#### PSD分析器 (`psd_analyzer/`)
- 功率谱密度分析
- 多线程数据处理
- 专业的PSD可视化界面
- 支持参数调整和结果导出

#### 曲线拟合工具 (`fitter_dialog/`)
- **简单拟合器**: 基础曲线拟合功能
- **纳米孔计算器**: 专门的纳米孔数据分析工具
- 多种拟合算法支持
- 拟合参数可视化展示

#### 直方图分析器 (`histogram/`)
- **最新功能**: 新增cursor交互功能 (2025-09-03)
- **数据管理**: 完整的数据处理和导出工具
- **交互式控制**: 实时参数调整和可视化
- **一键复制**: 图像快速复制功能
- **拟合信息面板**: 可隐藏/显示的拟合结果展示
- **错误处理**: 支持NaN和Inf数据的处理

#### 峰值检测器 (`spikes_detector/`)
- **自动检测**: 智能峰值识别算法
- **手动选择**: 交互式峰值选择模式
- **可视化展示**: 专业的峰值分析图表

### 🗂️ 文件与笔记管理
- **笔记系统**: 为数据文件添加注释和分析记录
- **文件索引**: JSON格式的笔记索引管理
- **处理文件追踪**: 已处理文件的状态管理和组织

## 技术架构

### 核心依赖
```
PyQt6==6.8.1          # 现代化GUI框架
numpy==2.2.3           # 数值计算核心
pandas==2.2.3          # 数据处理
matplotlib==3.10.1     # 可视化引擎
scipy==1.15.2          # 科学计算
h5py==3.13.0          # HDF5文件支持
```

### 专业格式支持
```
npTDMS==1.10.0         # TDMS格式支持
pyabf==2.3.8           # ABF格式支持
```

### 项目结构
```
NPA3/
├── main.py                    # 应用程序入口
├── core/                      # 核心数据处理模块
│   ├── data_processor.py      # 数据处理引擎
│   ├── data_visualizer.py     # 可视化组件
│   └── load_oscilloscope_csv.py # 示波器CSV专用加载器
├── gui/                       # 图形界面系统
│   ├── main_window.py         # 主窗口框架
│   ├── components/            # 分析工具组件
│   │   ├── psd_analyzer/      # PSD分析器
│   │   ├── fitter_dialog/     # 曲线拟合工具
│   │   ├── histogram/         # 直方图分析器
│   │   └── spikes_detector/   # 峰值检测器
│   └── styles.py              # 界面样式定义
└── utils/                     # 工具模块
    ├── config_manager.py      # 配置管理
    └── notes_manager.py       # 笔记管理系统
```

## 最新开发进展

### 2025年9月更新 (当前)
- **新增功能**: histogram cursor交互功能
- **Bug修复**: fit曲线切换tab后消失的问题
- **优化改进**: histogram线宽调整为0.7，提升查看体验
- **路径优化**: histogram文件存储路径管理改进

### 2025年8月更新
- **功能完善**: histogram一键图像复制功能
- **Bug修复**: fit选中删除与实际删除不一致的问题
- **新增滤波**: 工频噪音过滤功能
- **数据处理**: NaN和Inf数据显示bug修复

### 历史重要更新
- **2025年5月**: 大文件和低频信息处理优化
- **2025年4月**: manual select peak模式优化
- **2025年3月**: PSD功能增强和histogram功能重构

## 环境配置

### 快速启动 (Unix/macOS)
```bash
./setup_venv.sh    # 创建虚拟环境
source activate.sh  # 激活环境
python main.py     # 启动应用
```

### 快速启动 (Windows)
```cmd
setup_venv.bat     # 创建虚拟环境
activate.bat       # 激活环境
python main.py     # 启动应用
```

## 功能特色

### 专业数据处理
- 支持多种实验数据格式的无缝读取
- 专业级信号处理算法集成
- 大文件处理优化和内存管理

### 交互式分析
- 实时参数调整和结果预览
- 多线程处理保证界面响应性
- 可视化参数精细控制

### 数据管理
- 完整的数据处理流程追踪
- 笔记和注释系统
- 结果导出和文件管理

### 用户体验
- 现代化界面设计
- 可折叠界面布局
- 直观的三区域工作流程

## 持续优化计划

作为个人持续优化项目，NPA3将根据实际使用需求不断添加新功能和改进现有功能：

- **性能优化**: 大数据集处理性能提升
- **功能扩展**: 更多分析算法集成
- **界面改进**: 用户体验持续优化
- **稳定性**: Bug修复和代码优化

## Git提交历史

**最新提交**: `b4c53c8` - histogram cursor功能和fit曲线bug修复 (2025-09-03)

项目保持活跃开发状态，定期提交代码改进和功能更新。

---

**维护者**: mr.curlyw  
**联系方式**: zwang094@fiu.edu  
**项目类型**: 持续优化的个人科研工具  
**更新频率**: 根据需求持续更新
